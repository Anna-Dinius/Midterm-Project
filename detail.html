<!doctype html>
<html lang="en">
  <head>
    <title>Details</title>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <!-- CSS -->
	<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-T3c6CoIi6uLrA9TneNEoa7RxnatzjcDSCmG1MXxSR1GAsXEV/Dwwykc2MPK8M2HN" crossorigin="anonymous" />
    <link rel="stylesheet" href="styles.css" type="text/css" />
    <!-- JS -->
	<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js integrity="sha384-C6RzsynM9kWDrMNeT87bh95OGNyZPhcTNXj1NW7RuBCsyN/o0jlpcV8Qyq46cDfL" crossorigin="anonymous" ></script>
  </head>

  <body>
    <div class="container">
      <div class="row">
        <div class="colpic">
          <img
            class="pic"
            src=""
            alt="Pet photo"
            id="photo"
          /><!-- JS below fills in src attribute based on pet id-->
        </div>
        <div class="col">
          <h5><a href="index.html">Back to Index</a></h5>
          <h3 id="name"></h3>
          <h3 id="author"></h3>
            <div class="d-flex justify-content-center flex-column">
              <div class="fw-bold text-center">Category: </div><div id="category" class="text-center"></div>
              <div class="fw-bold text-center">Prep Time: </div><div id="prep_time" class="text-center"></div>
              <div class="fw-bold text-center">Cook Time: </div><div id="cook_time" class="text-center"></div>
              <div class="fw-bold text-center">Total Time: </div><div id="total_time" class="text-center"></div>
              <div class="fw-bold text-center">Servings: </div><div id="servings" class="text-center"></div>
            </div>
          <h3>Ingredients</h3>
          <div class="centerContent">
            <ul id="ingredients">
            </ul>
          </div>
          <h3>Steps</h3>
          <div class="centerContent">
            <ol id="steps"></ol>
          </div>
        </div>
      </div>
	<script src="https://code.jquery.com/jquery-3.7.1.js" integrity="sha256-eKhayi8LEQwp4NKxN+CfCh+3qOVUtJn3QNZ0TciWLP4=" crossorigin="anonymous" ></script>
	<script>
      let apiUrl = "https://jsonblob.com/api/jsonBlob/1212147388440764416";
      let queryString = window.location.search;
      let urlParams = new URLSearchParams(queryString);
      let recipeId = parseInt(urlParams.getAll("item")[0]);
      console.log(recipeId)
      function getIndex(id, arr) {
        for (let i = 0; i < arr.length; i++) {
          if (arr[i].id === id) {
            return i;
          }
        }
      return -1;
    }

	  
    $.get(apiUrl, function(data) {
      let recipe = data[getIndex(recipeId, data)];
      $('#photo').attr('src', recipe.image)
      for (let key in recipe) {
          if (!Array.isArray(recipe[key])) {
            $(`#${key}`).text(recipe[key])
          }
        }
      for (let i in recipe.ingredients) {
          $('#ingredients').append(`<li>${recipe.ingredients[i]}</li>`)
      }
      for (let i in recipe.steps) {
          $('#steps').append(`<li>${recipe.steps[i]}</li>`)
      }
    }).fail(function() {
      console.log("Error loading data from the API.");
    });
	</script>
  </body>
 </html>
